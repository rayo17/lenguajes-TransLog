:-consult('Base de Datos Adjetivos.pl').
:-consult('Base de datos Sustantivos.pl').
:-consult('Base de Datos Verbos.pl').

% regla que se tiene que llamar desde la consola para 
% realizar la traducción. Es lo que inicia el traductor

oracion :-
  write('Ingrese el idioma a traducir '),
  nl,
  read(Spanish), traductor(Spanish), !.


% Seleccion del idioma English: traduce al idioma Español
traductor(E) :- E = "In", 
  write('Please type your text to be translated: '),
  nl,
  read(Spanish),
  split_string(Spanish, " ", "¿¡,", L),
  oracion(K, L),
  atomic_list_concat(K, ' ', ListWordSpanish),
  write(ListWordSpanish).

% Seleccion del idioma Español: traduce al idioma Inglés
traductor(E) :- E = "Es",
  write('Ingresa el oracion para ser traducido: '),
  nl,
  read(Spanish),
  split_string(Spanish, " ", "¿¡,", L),
  oracion(L, K),
  atomic_list_concat(K, ' ', ListWordSpanish),
  write(ListWordSpanish).

% En caso de que la frase u oración no se reconozca
tex_unknown :- write('Disculpa, no te he entendido'), nl,
                 write('Intentalo de nuevo'), nl, 
                 oracion.

%Funcion que concatena las distintas partes de la oración que se encontraron
% Head: Head de la lista
% R: Resto
% L: lista
% ListaA, ListaB, ListaC, ListaX, ListaZ: son listas cualesquiera 
unir([], Lista, Lista). % caso base
unir([Head|R1], Lista, [Head|R2]) :- unir(R1, Lista, R2).
unir(ListaA, ListaB, ListaC, ListaZ)  :- unir(ListaA, ListaB, ListaX), 
                                               unir(ListaX, ListaC, ListaZ).


% ------------------------------------GRAMÁTICA LIBRE DE CONTEXTO-----------------------------------------


oracion(ListWordSpanish, ListWordEnglish) :- simple_sentence(ListWordSpanish, ListWordEnglish).
oracion(ListWordSpanish, ListWordEnglish) :- simple_sentence(Spanish, English), conjuncion(Spanish2, English2), 
                                                      unir(Spanish, Spanish2, Spanish3), 
                                                      unir(English, English2, English3), 
                                                      unir(Spanish3, RestoSpanish, ListWordSpanish), 
                                                      unir(English3, RestoEnglish, ListWordEnglish), 
                                                      oracion(RestoSpanish, RestoEnglish).  

oracion(ListWordSpanish, ListWordEnglish) :- simple_sentence(Spanish, English), preposicion(Spanish2, English2),
                                                      unir(Spanish,Spanish2, Spanish3), 
                                                      unir(English,English2, English3), 
                                                      unir(Spanish3, RestoSpanish, ListWordSpanish), 
                                                      unir(English3, RestoEnglish, ListWordEnglish), 
                                                      oracion(RestoSpanish,RestoEnglish).
                

oracion(ListWordSpanish, ListWordEnglish) :- tex_unknown, !.

% Es una subdivisión de una oración más compleja en una oración más simple. En este caso para
% facilidad a la hora de formar oraciones con más elementos en la gramática
% Person: significa la persona en la cual está conjugado algún elemento de la oración (primera, segunda, tercera) 

simple_sentence(ListWordSpanish, ListWordEnglish) :- saludo(Spanish, English), 
                                                             unir(Spanish, ["!"], ListWordSpanish), 
                                                             unir(English, ["!"], ListWordEnglish).

% Esto es una excepción a la gramática, solo para temas de la especificación de la tarea
simple_sentence(ListWordSpanish, ListWordEnglish) :- nominal_sintac(ListWordSpanish, ListWordEnglish, Person).

simple_sentence(ListWordSpanish, ListWordEnglish) :- nominal_sintac(Spanish, English, Person), 
                                                             sintagma_verbal(Spanish2, English2, Person), 
                                                             unir(Spanish, Spanish2, ListWordSpanish), 
                                                             unir(English, English2, ListWordEnglish).

% Esto es una excepción a la gramática, solo para temas de la especificación de la tarea. Se utiliza para
% preguntas sencillas
simple_sentence(ListWordSpanish, ListWordEnglish) :- interrogativo(Spanish, English), 
                                                             sintagma_verbal(Spanish2, English2, Person), 
                                                             unir(Spanish, Spanish2, ResultadoSpanish), 
                                                             unir(ResultadoSpanish, ["?"], ListWordSpanish), 
                                                             unir(English, English2, ResultadoIngles), 
                                                             unir(ResultadoIngles, ["?"], ListWordEnglish).


%-----------------------------------------SINTAGMA VERBAL------------------------------------------


sintagma_verbal(wordSpanish, WordEnglish, Person) :- verbo(Numero, Person, wordSpanish, WordEnglish).
sintagma_verbal(wordSpanish, WordEnglish, Person) :- verbo(Numero, Person, Spanish, English),
                                                           nominal_sintac(Spanish2, English2, Person), 
                                                           unir(Spanish, Spanish2, wordSpanish), 
                                                           unir(English, English2, WordEnglish).


%-------------------------------------------------SINTAGMA NOMINAL-----------------------------------


% Estos son los elementos más atómicos del sintagma nominal
nominal_sintac(wordSpanish, WordEnglish, Person) :- sustantivo(Numero, Genero, wordSpanish, WordEnglish).
nominal_sintac(wordSpanish, WordEnglish, Person) :- pronombre(Numero, Person, wordSpanish, WordEnglish).
nominal_sintac(wordSpanish, WordEnglish, Person) :- adjetivo(Numero, Genero, wordSpanish, WordEnglish).


% Estos son los elementos complejos del sintagma nominal
nominal_sintac(wordSpanish, WordEnglish, Person) :- determinante(Numero, Genero, Person, Spanish, English),
                                                            sustantivo(Numero, Genero, Spanish2, English2),
                                                            unir(Spanish, Spanish2, wordSpanish), 
                                                            unir(English, English2, WordEnglish).

nominal_sintac(wordSpanish, WordEnglish, Person) :- sustantivo(Numero, Genero, Spanish, English), 
                                                            adjetivo(Numero, Genero, Spanish2, English2),
                                                            unir(Spanish, Spanish2, wordSpanish), 
                                                            unir(English2, English, WordEnglish).

nominal_sintac(wordSpanish, WordEnglish, Person) :- determinante(Numero, Genero, Person, Spanish, English),
                                                            adjetivo(Numero, Genero, Spanish2, English2), 
                                                            sustantivo(Numero, Genero, Spanish3, English3), 
                                                            unir(Spanish, Spanish2, Spanish3, wordSpanish), 
                                                            unir(English, English2, English3, WordEnglish).

nominal_sintac(wordSpanish, WordEnglish, Person) :- determinante(Numero, Genero, Person, Spanish, English),
                                                            sustantivo(Numero, Genero, Spanish2, English2), 
                                                            adjetivo(Numero, Genero, Spanish3, English3), 
                                                            unir(Spanish, Spanish2, Spanish3, wordSpanish), 
                                                            unir(English, English3, English2, WordEnglish).

nominal_sintac(wordSpanish, WordEnglish, Person) :- adjetivo(Numero, Genero, Spanish, English), 
                                                            adverbio(Spanish2, English2), 
                                                            unir(Spanish, Spanish2, wordSpanish), 
                                                            unir(English, English2, WordEnglish).



%Base de datos












